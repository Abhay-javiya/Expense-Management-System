generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "mysql"
}

model categories {
  CategoryID     Int              @id @default(autoincrement())
  CategoryName   String           @db.VarChar(250)
  LogoPath       String?          @db.VarChar(250)
  IsExpense      Boolean
  IsIncome       Boolean
  IsActive       Boolean          @default(true)
  Description    String?          @db.VarChar(500)
  UserID         Int
  Sequence       Decimal?         @db.Decimal(10, 2)
  Created        DateTime         @default(now()) @db.DateTime(0)
  Modified       DateTime         @default(now()) @db.DateTime(0)
  users          users            @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "categories_ibfk_1")
  expenses       expenses[]
  incomes        incomes[]
  sub_categories sub_categories[]

  @@index([UserID], map: "UserID")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model expense_health_scores {
  HealthScoreID Int                           @id @default(autoincrement())
  PeopleID      Int
  Score         Int?
  Status        expense_health_scores_Status?
  Month         Int?
  Year          Int?
  CreatedAt     DateTime?                     @default(now()) @db.DateTime(0)
  peoples       peoples                       @relation(fields: [PeopleID], references: [PeopleID], onDelete: NoAction, onUpdate: NoAction, map: "expense_health_scores_ibfk_1")

  @@index([PeopleID], map: "PeopleID")
}

model expense_insights {
  InsightID    Int       @id @default(autoincrement())
  PeopleID     Int
  InsightType  String?   @db.VarChar(100)
  InsightValue String?   @db.VarChar(250)
  Month        Int?
  Year         Int?
  CreatedAt    DateTime? @default(now()) @db.DateTime(0)
  peoples      peoples   @relation(fields: [PeopleID], references: [PeopleID], onDelete: NoAction, onUpdate: NoAction, map: "expense_insights_ibfk_1")

  @@index([PeopleID], map: "PeopleID")
}

model expenses {
  ExpenseID      Int             @id @default(autoincrement())
  ExpenseDate    DateTime        @db.DateTime(0)
  CategoryID     Int?
  SubCategoryID  Int?
  PeopleID       Int
  ProjectID      Int?
  Amount         Decimal         @db.Decimal(12, 2)
  ExpenseDetail  String?         @db.VarChar(500)
  AttachmentPath String?         @db.VarChar(250)
  Description    String?         @db.VarChar(500)
  IsAnomaly      Boolean?        @default(false)
  AnomalyReason  String?         @db.VarChar(250)
  UserID         Int
  Created        DateTime        @default(now()) @db.DateTime(0)
  Modified       DateTime        @default(now()) @db.DateTime(0)
  categories     categories?     @relation(fields: [CategoryID], references: [CategoryID], onDelete: NoAction, onUpdate: NoAction, map: "expenses_ibfk_1")
  sub_categories sub_categories? @relation(fields: [SubCategoryID], references: [SubCategoryID], onDelete: NoAction, onUpdate: NoAction, map: "expenses_ibfk_2")
  peoples        peoples         @relation(fields: [PeopleID], references: [PeopleID], onDelete: NoAction, onUpdate: NoAction, map: "expenses_ibfk_3")
  projects       projects?       @relation(fields: [ProjectID], references: [ProjectID], onDelete: NoAction, onUpdate: NoAction, map: "expenses_ibfk_4")
  users          users           @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "expenses_ibfk_5")

  @@index([CategoryID], map: "CategoryID")
  @@index([PeopleID], map: "PeopleID")
  @@index([ProjectID], map: "ProjectID")
  @@index([SubCategoryID], map: "SubCategoryID")
  @@index([UserID], map: "UserID")
  @@index([ExpenseDate], map: "idx_expense_date")
}

model incomes {
  IncomeID       Int             @id @default(autoincrement())
  IncomeDate     DateTime        @db.DateTime(0)
  CategoryID     Int?
  SubCategoryID  Int?
  PeopleID       Int
  ProjectID      Int?
  Amount         Decimal         @db.Decimal(12, 2)
  IncomeDetail   String?         @db.VarChar(500)
  AttachmentPath String?         @db.VarChar(250)
  Description    String?         @db.VarChar(500)
  UserID         Int
  Created        DateTime        @default(now()) @db.DateTime(0)
  Modified       DateTime        @default(now()) @db.DateTime(0)
  categories     categories?     @relation(fields: [CategoryID], references: [CategoryID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_1")
  sub_categories sub_categories? @relation(fields: [SubCategoryID], references: [SubCategoryID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_2")
  peoples        peoples         @relation(fields: [PeopleID], references: [PeopleID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_3")
  projects       projects?       @relation(fields: [ProjectID], references: [ProjectID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_4")
  users          users           @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "incomes_ibfk_5")

  @@index([CategoryID], map: "CategoryID")
  @@index([PeopleID], map: "PeopleID")
  @@index([ProjectID], map: "ProjectID")
  @@index([SubCategoryID], map: "SubCategoryID")
  @@index([UserID], map: "UserID")
}

model peoples {
  PeopleID              Int                     @id @default(autoincrement())
  PeopleCode            String?                 @db.VarChar(50)
  PeopleName            String                  @db.VarChar(250)
  Email                 String                  @db.VarChar(150)
  MobileNo              String                  @db.VarChar(50)
  Description           String?                 @db.VarChar(500)
  UserID                Int
  IsActive              Boolean?                @default(true)
  Created               DateTime                @default(now()) @db.DateTime(0)
  Modified              DateTime                @default(now()) @db.DateTime(0)
  expense_health_scores expense_health_scores[]
  expense_insights      expense_insights[]
  expenses              expenses[]
  incomes               incomes[]
  users                 users                   @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "peoples_ibfk_1")

  @@index([UserID], map: "UserID")
}

model projects {
  ProjectID        Int        @id @default(autoincrement())
  ProjectName      String     @db.VarChar(250)
  ProjectLogo      String?    @db.VarChar(250)
  ProjectStartDate DateTime?  @db.DateTime(0)
  ProjectEndDate   DateTime?  @db.DateTime(0)
  ProjectDetail    String?    @db.VarChar(500)
  Description      String?    @db.VarChar(500)
  UserID           Int
  IsActive         Boolean?   @default(true)
  Created          DateTime   @default(now()) @db.DateTime(0)
  Modified         DateTime   @default(now()) @db.DateTime(0)
  expenses         expenses[]
  incomes          incomes[]
  users            users      @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "projects_ibfk_1")

  @@index([UserID], map: "UserID")
}

model sub_categories {
  SubCategoryID   Int        @id @default(autoincrement())
  CategoryID      Int
  SubCategoryName String     @db.VarChar(250)
  LogoPath        String?    @db.VarChar(250)
  IsExpense       Boolean
  IsIncome        Boolean
  IsActive        Boolean    @default(true)
  Description     String?    @db.VarChar(500)
  UserID          Int
  Sequence        Decimal?   @db.Decimal(10, 2)
  Created         DateTime   @default(now()) @db.DateTime(0)
  Modified        DateTime   @default(now()) @db.DateTime(0)
  expenses        expenses[]
  incomes         incomes[]
  categories      categories @relation(fields: [CategoryID], references: [CategoryID], onDelete: NoAction, onUpdate: NoAction, map: "sub_categories_ibfk_1")
  users           users      @relation(fields: [UserID], references: [UserID], onDelete: NoAction, onUpdate: NoAction, map: "sub_categories_ibfk_2")

  @@index([CategoryID], map: "CategoryID")
  @@index([UserID], map: "UserID")
}

model users {
  UserID         Int              @id @default(autoincrement())
  UserName       String           @db.VarChar(250)
  EmailAddress   String           @unique(map: "EmailAddress") @db.VarChar(500)
  Password       String           @db.VarChar(255)
  MobileNo       String           @db.VarChar(50)
  ProfileImage   String?          @db.VarChar(500)
  Role           users_Role       @default(User)
  Created        DateTime         @default(now()) @db.DateTime(0)
  Modified       DateTime         @default(now()) @db.DateTime(0)
  categories     categories[]
  expenses       expenses[]
  incomes        incomes[]
  peoples        peoples[]
  projects       projects[]
  sub_categories sub_categories[]
}

enum expense_health_scores_Status {
  Good
  Warning
  Critical
}

enum users_Role {
  Admin
  User
}
